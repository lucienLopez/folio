// tablesort@5.7.0 downloaded from https://ga.jspm.io/npm:tablesort@5.7.0/src/tablesort.js

var t=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:global;var e={};(function(){function r(e,n){if(!((this||t)instanceof r))return new r(e,n);if(!e||e.tagName!=="TABLE")throw new Error("Element must be a table");this.init(e,n||{})}var n=[];var o=function(t){var e;if(window.CustomEvent&&typeof window.CustomEvent==="function")e=new CustomEvent(t);else{e=document.createEvent("CustomEvent");e.initCustomEvent(t,false,false,void 0)}return e};var i=function(t,e){var r=e.sortAttribute||"data-sort";return t.hasAttribute(r)?t.getAttribute(r):t.textContent||t.innerText||""};var s=function(t,e){t=t.trim().toLowerCase();e=e.trim().toLowerCase();return t===e?0:t<e?1:-1};var a=function(t,e){return[].slice.call(t).find((function(t){return t.getAttribute("data-sort-column-key")===e}))};var l=function(t,e){return function(r,n){var o=t(r.td,n.td);return o===0?e?n.index-r.index:r.index-n.index:o}};r.extend=function(t,e,r){if(typeof e!=="function"||typeof r!=="function")throw new Error("Pattern and sort must be a function");n.push({name:t,pattern:e,sort:r})};r.prototype={init:function(e,r){var n,o,i,s,a=this||t;a.table=e;a.thead=false;a.options=r;if(e.rows&&e.rows.length>0)if(e.tHead&&e.tHead.rows.length>0){for(i=0;i<e.tHead.rows.length;i++)if(e.tHead.rows[i].getAttribute("data-sort-method")==="thead"){n=e.tHead.rows[i];break}n||(n=e.tHead.rows[e.tHead.rows.length-1]);a.thead=true}else n=e.rows[0];if(n){var l=function(){a.current&&a.current!==(this||t)&&a.current.removeAttribute("aria-sort");a.current=this||t;a.sortTable(this||t)};for(i=0;i<n.cells.length;i++){s=n.cells[i];s.setAttribute("role","columnheader");if(s.getAttribute("data-sort-method")!=="none"){s.tabIndex=0;s.addEventListener("click",l,false);s.addEventListener("keydown",(function(e){if(e.key==="Enter"){e.preventDefault();l.call(this||t)}}));s.getAttribute("data-sort-default")!==null&&(o=s)}}if(o){a.current=o;a.sortTable(o)}}},sortTable:function(e,r){var d=this||t,u=e.getAttribute("data-sort-column-key"),f=e.cellIndex,c=s,h="",b=[],g=d.thead?0:1,v=e.getAttribute("data-sort-method"),w=e.hasAttribute("data-sort-reverse"),m=e.getAttribute("aria-sort");d.table.dispatchEvent(o("beforeSort"));if(!r){m=m==="ascending"?"descending":m==="descending"?"ascending":!!d.options.descending!=w?"descending":"ascending";e.setAttribute("aria-sort",m)}if(!(d.table.rows.length<2)){if(!v){while(b.length<3&&g<d.table.tBodies[0].rows.length){B=u?a(d.table.tBodies[0].rows[g].cells,u):d.table.tBodies[0].rows[g].cells[f];h=B?i(B,d.options):"";h=h.trim();h.length>0&&b.push(h);g++}if(!b)return}for(g=0;g<n.length;g++){h=n[g];if(v){if(h.name===v){c=h.sort;break}}else if(b.every(h.pattern)){c=h.sort;break}}d.col=f;for(g=0;g<d.table.tBodies.length;g++){var p,A=[],E={},x=0,y=0;if(!(d.table.tBodies[g].rows.length<2)){for(p=0;p<d.table.tBodies[g].rows.length;p++){var B;h=d.table.tBodies[g].rows[p];if(h.getAttribute("data-sort-method")==="none")E[x]=h;else{B=u?a(h.cells,u):h.cells[d.col];A.push({tr:h,td:B?i(B,d.options):"",index:x})}x++}if(m==="descending")A.sort(l(c,true));else{A.sort(l(c,false));A.reverse()}for(p=0;p<x;p++){if(E[p]){h=E[p];y++}else h=A[p-y].tr;d.table.tBodies[g].appendChild(h)}}}d.table.dispatchEvent(o("afterSort"))}},refresh:function(){(this||t).current!==void 0&&this.sortTable((this||t).current,true)}};e?e=r:window.Tablesort=r})();var r=e;export{r as default};

