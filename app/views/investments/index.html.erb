<div class="w-full">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 tracking-tight">Portfolio</h1>
    <p class="mt-1 text-sm text-gray-500">Your investment holdings</p>
  </div>

  <div class="table-wrap">
    <table class="min-w-full divide-y divide-gray-200" data-controller="sort">
      <thead class="bg-gray-900">
        <tr>
          <th class="table-th sortable text-left">Name</th>
          <th class="table-th sortable text-left">Kind</th>
          <th class="table-th text-left" data-sort-method="none">ISIN</th>
          <th class="table-th sortable text-right">Shares</th>
          <th class="table-th sortable text-right">Purchase Price</th>
          <th class="table-th sortable text-left">Date</th>
          <th class="table-th sortable text-right">Total</th>
          <th class="table-th sortable text-right">Fees</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-100">
        <% @investments.each do |investment| %>
          <tr class="table-row">
            <td class="table-td font-medium text-gray-900"><%= investment.security.name %></td>
            <td class="table-td"><%= security_kind_badge(investment.security.kind) %></td>
            <td class="table-td font-mono text-sm text-gray-500"><%= investment.security.isin %></td>
            <td class="table-td text-right text-gray-700"><%= investment.shares %></td>
            <td class="table-td text-right text-gray-700" data-sort="<%= investment.purchase_price %>"><%= number_to_currency(investment.purchase_price, unit: '€') %></td>
            <td class="table-td text-sm text-gray-500" data-sort="<%= investment.purchased_at.strftime('%Y%m%d') %>"><%= investment.purchased_at.strftime('%b %d, %Y') %></td>
            <td class="table-td text-right font-semibold text-gray-900" data-sort="<%= investment.total_price %>"><%= number_to_currency(investment.total_price, unit: '€') %></td>
            <td class="table-td text-right text-sm text-gray-500" data-sort="<%= investment.fees %>">
              <%= number_to_currency(investment.fees, unit: '€') %>
              <span class="text-xs text-gray-400">(<%= number_to_percentage(investment_fees_percentage(investment)) %>)</span>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
